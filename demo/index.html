<html>
    <head>
        <script type='text/javascript' src='https://www.gstatic.com/charts/loader.js'></script>
        <script type='text/javascript' src='http://threejs.org/build/three.min.js'></script>
        <script type='text/javascript' src='http://threejs.org/examples/js/loaders/STLLoader.js'></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.0.0/lodash.min.js"></script>
        <script type="text/javascript" src="index.js"></script>
    </head>
    <body>
        <div id="motion_chart" ></div>
        <div id="quad_scene"></div>
    <script type='text/javascript'>



            var container, camera, scene, renderer, controls, mesh, axis, pivot;
            // Render some stuff

            axis = new THREE.Vector3(0.5, 0.5, 0);

            function init() {
                container = document.createElement('div');
                document.body.appendChild(container);

                renderer = new THREE.WebGLRenderer( { antialias: true } );
                renderer.setSize(900, 500);
                container.appendChild(renderer.domElement);

                scene = new THREE.Scene();

                camera = new THREE.PerspectiveCamera(35, 900/500, 1, 10000);
                camera.position.set(0, -300, 0);
                camera.updateProjectionMatrix();
                scene.add(camera);

                scene.add(new THREE.AmbientLight(0x222222));
                var light = new THREE.PointLight(0xffffff, 0.8);
                camera.add(light);

                var loader = new THREE.STLLoader();
                loader.load('http://localhost:8080/FullB.stl', function(geometry) {
                    var material = new THREE.MeshPhongMaterial( {color: 0xff5533} );
                    mesh = new THREE.Mesh(geometry, material);
                    mesh.rotation.y = Math.PI / 2;

                    var box = new THREE.Box3().setFromObject(mesh);
                    var center = box.center();
                    mesh.translateX(-center.x);
                    mesh.translateY(-center.y);
                    mesh.translateZ(-center.z);

                    mesh.rotation.order = "YZX";

                    scene.add(mesh);
                });
            };

            function animate() {
                requestAnimationFrame(animate);
                render();
            }

            function render() {
                if (mesh) {
                    mesh.rotation.x = lastDataPoint.pitch;
                    mesh.rotation.y = Math.PI / 2 + lastDataPoint.roll;
                }
                camera.lookAt(scene.position);
                renderer.render(scene, camera);
            }

           // init();
           // animate();

        </script>
    </body>
</html>
